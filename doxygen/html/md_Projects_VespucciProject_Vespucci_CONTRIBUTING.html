<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vespucci: Guidelines for Potential Contributors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="vespuccilogo150.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vespucci
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_Projects_VespucciProject_Vespucci_CONTRIBUTING.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Guidelines for Potential Contributors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Thank you for your interest in contributing to the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> Project. These guidelines should help you make a valuable contribution to the project. They cover the process of contributing to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>, the process of adding a spectral pre-processing method and the process of adding a spectral analysis method. By following these guidelines, we hope <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> can attain a higher degree of quality than other research code.</p>
<h1>Contributing to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> </h1>
<p>The issues page on GitHub includes features we would like to see added to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> that we are currently not working on. If you have a contribution to make, comment on one of these issues (or start your own) and we may assign the issue to you.</p>
<p>If you have code to contribute to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>, simply make a pull request with your changes to the VespucciProject GitHub page. The contribution should include unit tests for at least the functions added to the <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> namespace. The pull request will be automatically built by our build service providers, which will execute unit tests (provided you have added them to the Test.pro project). The code will be examined for style and quality by the maintainer, and if all tests pass and the contribution is deemed within the mission of the project, your contribution will be integrated into the code base and your name added to our list of contributors. Any code contributed must compile, test, and run successfully on all three of <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>'s target platforms.</p>
<p>If you have already implemented a method not found in <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> in MATLAB or Octave, take a look at the <a href="http://arma.sourceforge.net/docs.html#syntax">syntax conversion table</a>. Re-writing MATLAB code in C++ using Armadillo is fairly easy.</p>
<p>If you are uncomfortable with Qt, but have a meaningful math function to contribute to the library, feel free to make a contribution. The user interface can be created later. Bug fixes and code that improves performance or clarity of existing functions are also welcome.</p>
<h1>Libraries </h1>
<p>Generally, code contributed to the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> project can rely only on the following libraries:</p><ul>
<li>Qt</li>
<li>Boost</li>
<li>Armadillo</li>
<li>mlpack</li>
</ul>
<p>If there is a compelling reason to use a different library than the ones listed above, please discuss it with us using the issues tab before you start writing code. Any library that is to be used in <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> must be regularly built and tested on Windows 7 (using MSVC and GCC), Mac OS 10.7 (Using clang), and Ubuntu 14.04 LTS (or a similar GNU/Linux distro, using GCC). If the library is not regularly tested on one of these platforms, and there is compelling reason to do so, we will set-up regular testing using Travis-CI and or Appveyor. As Vesucci is distributed under the terms of the GPL, any additional library used must use a license acceptable for GPL software.</p>
<h1>Code Style </h1>
<h2>Style Guides </h2>
<p><a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> tries to adhere to the <a href="https://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a>. However, none of the libraries <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> links to follow this guide. Armadillo uses underscore_case for all names and mlpack and Qt use camelCase for all names. The following exceptions (and perhaps others) apply:</p><ul>
<li>Source files take the extension <code>.cpp</code></li>
<li>Member functions that call their member's member functions take the same style as their member's member function (e.g. if we write a function in a <code>QDialog</code> class that calls the <code>addGraph</code> member of a <code><a class="el" href="class_q_custom_plot.html" title="The central class of the library. This is the QWidget which displays the plot and interacts with the ...">QCustomPlot</a></code> object, we name the member of the <code>QDialog</code> "`addGraph()`", rather than the stylistically preferred "`AddGraph()`").</li>
</ul>
<h2>Names </h2>
<ul>
<li>Both member functions and functions that do not belong to a class are named in PascalCase, unless they are getters.</li>
<li>Member variables are denoted in underscore_case, with a trailing underscore (e.g. <code>name_</code>, <code>spectra_</code>, etc).</li>
<li>Variables that are not members are denoted in underscore_case.</li>
<li>Setters are named in PascalCase like other functions, but are named after the variables they set (e.g. <code>SetName()</code> for the setter of the <code>name_</code> member).</li>
<li>Getters are named after the member they return (e.g. the getter for <code>abscissa_</code> is named <code>abscissa()</code>). Getters that return pointers to members have <code>_ptr</code> appended to the end of their names. Where getters that return copies and getters that return references both exist, the getter that returns the reference is named with <code>_ref</code> appended.</li>
<li>Every function belongs to a namespace, either the namespace of its parent class or a namespace like <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> or <code><a class="el" href="namespace_binary_import.html">BinaryImport</a></code>.</li>
<li>Widgets in Qt forms are named using Qt camelCase style inside .ui files. The type of the widget should be included in the name because they have to be called something. Widgets should be accessed using the ui member of the form class.</li>
<li>As mentioned above, an exception exists for a function whose sole purpose is to call the member of one of the class's members.</li>
</ul>
<h2>Types </h2>
<p>Variables in <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> should use the following types:</p><ul>
<li>Numeric data should use armadillo types whenever possible.</li>
<li>Data to be displayed to the user should use Qt types whenever possible, converting them to standard library types only when necessary.</li>
<li>If a variable is expected to be unsigned, it should use an unsigned type.</li>
</ul>
<h1>Adding Processing Methods to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> </h1>
<p>To add a processing method to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>, the following must be done:</p><ul>
<li>A member function must be added to <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> to execute the analysis.</li>
<li>If the method requires more than 5 lines of code, a function performing the method must be included in the <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> namespace in the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> library.</li>
<li>A form class subclassed from <code>QDialog</code> must be created, or an existing dialog expanded to handle the new method.</li>
</ul>
<h2>Processing GUI Classes </h2>
<p>If a class already exists for performing a processing step substantially similar to the method to be added, the existing class should be expanded by the addition of widgets to handle user input. Widgets may also simply be reused with their <code>QLabel</code>s changed. If a new form class must be created, follow the same procedure as you would for a new analysis form class, documented in the subsection "Analysis GUI Classes" of the section "Adding Analysis Methods to Vespucci".</p>
<h1>Adding Analysis Methods to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> </h1>
<p>To add an analysis method to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>, the following must be done:</p><ul>
<li>A member function must be added to <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> to execute the analysis. This member must take <code>QString name</code> as its first parameter.</li>
<li>If a method has not yet been implemented in mlpack, a function to execute the analysis must be created in the <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> namespace of the VespucciLibrary.</li>
<li>A class must be created to handle data generated by the analysis, unless mlpack has already done this.</li>
<li>If a method is already implemented in mlpack, the <code><a class="el" href="class_analysis_results.html" title="The AnalysisResults class A container for a mat object that allows a mat to be copied to a heap-alloc...">AnalysisResults</a></code> may be constructed in the <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> member function.</li>
<li>A form class subclassed from <code>QDialog</code> to allow the user to enter parameters.</li>
</ul>
<h2>Analysis GUI Classes </h2>
<p>GUI classes to handle the input of parameters from the user must have the following:</p><ul>
<li>A constructor which takes the current <code>QModelIndex</code> from dataset tree view and obtains a <code>QSharedPointer&lt;<a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a>&gt;</code> to the dataset the analysis is to be performed on, and calls <code>findChild</code> on the required <code>QWidget</code> members.</li>
<li>A member called <code>data_</code> or <code>dataset_</code> which contains a <code>QSharedPointer&lt;<a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a>&gt;</code> corresponding to the active dataset.</li>
<li>Pointers to the appropriate <code>QWidget</code>s that interact with the user.</li>
<li>Correct names for the widgets. A <code>QWidget</code> that is called "thingWidget" in the .ui file should have a pointer named <code>thing_widget_</code> in the class. Widgets are named in the conventional Qt style within forms, but in Google-esque style within the C++ classes. The base type of the widget must be included in the name (e.g. <code>name_line_edit_</code> for the <code>QLineEdit</code> object that takes string representing a name from a user).</li>
</ul>
<h2><code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> member functions </h2>
<p>Member functions to perform an analysis must do the following:</p><ul>
<li>Take the name of the object to display to the user and use as a key in <code>analysis_results_</code>.</li>
<li>Perform the analysis through a class designed to handle the analysis (either bespoke or included from mlpack)</li>
<li>Add a <code>QSharedPointeR&lt;<a class="el" href="class_analysis_results.html" title="The AnalysisResults class A container for a mat object that allows a mat to be copied to a heap-alloc...">AnalysisResults</a>&gt;</code> object to <code>analysis_results_</code> map containing the matrices generated by the analysis. This is obtained from the <code>GetData()</code> method of the analysis handler or is initialized in the <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> member in the case of analysis methods implemented by mlpack.</li>
</ul>
<h2>Classes to Handle Analysis Data </h2>
<p>A <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> contains all analysis methods that may be called on it. Each analysis has a helper object which takes the data as a reference from the dataset. Helper objects must implement the following members:</p><ul>
<li>A constructor which takes the name of the result and relevant metadata</li>
<li>Private members of <code>arma::mat</code> type which store the results of the analysis. It is customary to use the member <code>results_</code> when a matrix is returned from an analysis function, and to name these members the same as the parameters of the analysis function (remembering to add the trailing underscore used for members in <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a>).</li>
<li>A method called <code>Apply()</code> to which is passed <code>spectra_</code> and perhaps <code>abscissa_</code>, along with the parameters of the analysis that are taken in the <code><a class="el" href="class_vespucci_dataset.html" title="The VespucciDataset class This is the main class for dealing with hyperspectral data. This handles the import and export of spectra, and the creation of maps. Images are handled by the MapData class. This class is intended to be allocated on the heap inside of a smart pointer, there is no copy constructor. ">VespucciDataset</a></code> analysis member function. This function calls the functions from the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> library that are required for the analysis.</li>
<li>A method called <code>GetData()</code>, which heap-allocates an <code><a class="el" href="class_analysis_results.html" title="The AnalysisResults class A container for a mat object that allows a mat to be copied to a heap-alloc...">AnalysisResults</a></code> object in a <code>QSharedPointer</code> and calls the <code>AppendResult()</code> method of the <code><a class="el" href="class_analysis_results.html" title="The AnalysisResults class A container for a mat object that allows a mat to be copied to a heap-alloc...">AnalysisResults</a></code> object to add matrices. Each matrix should have name that constitutes a unique key, and if necessary, column headings should be provided in a <code>QStringList</code> for at least the first 15 columns of each matrix.</li>
</ul>
<h2>Analysis Functions in the <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> Namespace </h2>
<p>Analysis methods must be implemented in either mlpack or armadillo, or in the <code><a class="el" href="namespace_vespucci_1_1_math.html" title="A namespace for math functions relating to linear least squares regression. ">Vespucci::Math</a></code> namespace. A few style rules apply to this namespace that do not apply to <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> in general:</p><ul>
<li>All matrices on which operations are to be performed are to be taken as constant references <code>const arma::mat&amp;</code>. If the matrix itself is to be modified, the function should return a copy or include a copy as a non-<code>const</code> reference parameter.</li>
<li>The <code>using</code> directive should not to be used so as to avoid confusion between functions in the <code>std</code> and <code>arma</code> namespaces.</li>
<li>To ease wrapping with other languages, Qt classes are to be avoided. The equivalent C++ standard library class should be used instead (e.g. <code>std::string</code> instead of <code>QString</code>). This is in contrast to the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> GUI program, where Qt types are preferred.</li>
<li>Armadillo, Boost, and the standard library are the only libraries that may be used. This is intended to make the code readable by users who are only familiar with languages like MATLAB.</li>
<li>Unit tests must be written using the Boost unit test framework.</li>
<li>Functions that check for success must have return values of type <code>bool</code>.</li>
<li>Each analysis that operates on single spectra must include a function that takes a single spectrum and a function that takes a column-major matrix of spectra. The function that takes a matrix will have the same name as the function that takes a vector, but with <code>Mat</code> appended to the end of the function name (e.g. <code>QuantifyPeak</code> and <code>QuantifyPeakMat</code>, where <code>QuantifyPeak</code> returns a <code>arma::rowvec</code> and <code>QuantifyPeakMat</code> returns an <code>arma::mat</code>).</li>
<li>If a matrix is expected to contain only one column, the <code>arma::vec</code> type should be used. If a matrix is expected to contain only one row, <code>arma::rowvec</code> type should be used.</li>
<li>If a value is expected to be unsigned, use <code>arma::uword</code> for integers and <code>unsigned double</code> for floating-point numbers.</li>
<li>Any function that can throw an exception should be inside of a <code>try/catch</code> block. The <code>catch</code> block must write the function call that threw the exception to <code>stdout</code> and throw the same exception again.</li>
<li>A function returning a matrix with more than one column for each spectrum should include these matrices in an <code>arma::field&lt;arma::mat&gt;</code> type.</li>
<li>Each function should be defined in a file with the same name as the header it is declared in and each type of analysis should include its own header and source file.</li>
<li>The use of C++11 features is highly recommended when they reduce the complexity of the code.</li>
</ul>
<h1>Writing Tests </h1>
<p>All methods in the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> library are unit tested to ensure code quality and reproducibility of results. The project located in the Test folder is used to run all unit tests on math functions. Example datasets are provided, including real-world and generated spectra. Unit tests written for functions in the <a class="el" href="namespace_vespucci.html" title="A namespace for &quot;global&quot; functions, including math functions. ">Vespucci</a> library should use the Boost unit test framework. Tests written for Qt classes should use QtTest. Some methods, such as Vertex Components Analysis are untestable as they produce different results each time they are run on the same data. These functions should only be tested for the validity of their output, not for the values. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
